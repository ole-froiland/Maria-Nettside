/* --- CSS reset & tokens --- */
*{box-sizing:border-box}
html{scroll-behavior:smooth}
@media (prefers-reduced-motion: reduce){html{scroll-behavior:auto}}
html,body{height:100%}
body{margin:0;line-height:1.6;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, 'Apple Color Emoji','Segoe UI Emoji';
  background: var(--bg); color: var(--fg);
}
:root{
  --bg:#0b1220; --fg:#e6edf7; --muted:#9fb1c7; --panel:#111a2e; --stroke:#1b2642;
  --brand:#0ea5e9; --brand-2:#22d3ee; --chip:#0d203a; --shadow:0 10px 30px rgba(0,0,0,.35);
  --ease-1:cubic-bezier(.16,1,.3,1); --ease-2:cubic-bezier(.19,1,.22,1);
  --dur-1:.18s; --dur-2:.35s; --dur-3:.6s; --dur-theme:.2s;
  --spot-x:50vw; --spot-y:40vh;
  /* extended palette for themed sections */
  --teal:#14b8a6; --teal-2:#99f6e4;
  --violet:#8b5cf6; --violet-2:#c4b5fd;
  --sky:#38bdf8; --sky-2:#bae6fd;
  --rose:#f43f5e; --rose-2:#fecdd3;
  /* button sizing */
  --btn-h: 38px; --btn-px: 12px; --btn-r: 12px;
}
:root.light{
  --bg:#f7fafc; --fg:#0b1220; --muted:#394154; --panel:#ffffff; --stroke:#e6eaf2;
  --brand:#0ea5e9; --brand-2:#0ea5e933; --chip:#e6f6ff; --shadow:0 12px 24px rgba(2,6,23,.08);
}
a{color:var(--brand);text-decoration:none}a:hover{text-decoration:underline}
h1,h2,h3{line-height:1.2;margin:0 0 .25rem}h2{font-size:1.25rem;margin-bottom:.75rem}h3{font-size:1.05rem}
p{margin:.25rem 0 .75rem;color:var(--fg)}.muted{color:var(--muted)}
.container{max-width:1000px;margin:0 auto;padding:24px;display:block}
.site{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:16px 24px;border-bottom:1px solid var(--stroke);background:linear-gradient(180deg,rgba(255,255,255,0.03),transparent);transition:background-color var(--dur-3) var(--ease-1)}
.site+main{padding-top:8px}
footer.site{border-top:1px solid var(--stroke);border-bottom:0;margin-top:32px;border-radius:12px;background:transparent}

.brand{display:flex;align-items:center;gap:14px}
.avatar{width:54px;height:54px;border-radius:50%;border:2px solid var(--stroke);background:linear-gradient(135deg,var(--brand),var(--brand-2));box-shadow:var(--shadow)}
.id .role{color:var(--muted);margin-top:-2px}

.btn{border:1px solid var(--stroke);background:linear-gradient(var(--panel), var(--panel)) padding-box, linear-gradient(120deg, color-mix(in oklab, var(--brand) 30%, transparent), color-mix(in oklab, var(--sky) 25%, transparent)) border-box;color:var(--fg);height:var(--btn-h);padding:0 var(--btn-px);border-radius:var(--btn-r);line-height:1;cursor:pointer;box-shadow:var(--shadow);display:inline-flex;align-items:center;gap:8px;transition:transform var(--dur-2) var(--ease-1), box-shadow var(--dur-2) var(--ease-1);will-change:transform, box-shadow}
.btn:hover{transform:translateY(-2px) scale(1.02)}
.btn:active{transform:translateY(0) scale(.99)}
.btn.outline{background:linear-gradient(var(--panel), var(--panel)) padding-box, linear-gradient(120deg, color-mix(in oklab, var(--brand) 30%, transparent), color-mix(in oklab, var(--sky) 25%, transparent)) border-box}
.actions{display:flex;gap:8px;flex-wrap:wrap}

.panel{position:relative;background:var(--panel);border:1px solid var(--stroke);border-radius:16px;padding:16px;margin:12px 0;box-shadow:var(--shadow);transition:transform var(--dur-3) var(--ease-2), box-shadow var(--dur-3) var(--ease-2), border-color var(--dur-2) var(--ease-1);contain:paint}
.panel:not([data-tilt]):hover{transform:translateY(-2px)}
.panel[data-tilt]{transform-style:preserve-3d}
.panel[data-tilt]::after{content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;border:1px solid transparent;background:linear-gradient(120deg,rgba(14,165,233,.35),rgba(34,211,238,.25)) border-box;mask:linear-gradient(#000 0 0) padding-box, linear-gradient(#000 0 0);-webkit-mask:linear-gradient(#000 0 0) padding-box, linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask-composite:exclude;opacity:.6;transition:opacity var(--dur-2) var(--ease-1)}
.panel::before{content:"";position:absolute;inset:-2px;border-radius:inherit;z-index:-1;pointer-events:none;opacity:.35;filter:blur(16px);transition:opacity var(--dur-3) var(--ease-2)}
.panel:hover::before{opacity:.55}
/* themed accents */
.panel[data-theme='brand']{--accent-1:var(--brand);--accent-2:var(--brand-2)}
.panel[data-theme='teal']{--accent-1:var(--teal);--accent-2:color-mix(in oklab, var(--teal) 35%, white 65%)}
.panel[data-theme='violet']{--accent-1:var(--violet);--accent-2:color-mix(in oklab, var(--violet) 35%, white 65%)}
.panel[data-theme='sky']{--accent-1:var(--sky);--accent-2:color-mix(in oklab, var(--sky) 35%, white 65%)}
.panel[data-theme]::before{background:radial-gradient(80% 120% at 20% 0%, color-mix(in oklab, var(--accent-1) 18%, transparent), transparent 60%), radial-gradient(80% 110% at 90% 20%, color-mix(in oklab, var(--accent-2) 18%, transparent), transparent 60%)}
.panel[data-theme]::after{background:linear-gradient(120deg, color-mix(in oklab, var(--accent-1) 50%, transparent), color-mix(in oklab, var(--accent-2) 40%, transparent)) border-box}
.panel[data-tilt]:hover::after{opacity:1}
.intro p{font-size:1rem}
.contact{list-style:none;padding:0;margin:.5rem 0 0;display:grid;gap:6px}
.grid.two{display:grid;grid-template-columns:1fr;gap:16px}
@media(min-width:840px){.grid.two{grid-template-columns:1fr 1fr}}

.item header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:.25rem}
.item time{color:var(--muted);font-variant-numeric:tabular-nums}
.tags,.chips,.list{list-style:none;padding:0;margin:6px 0 0;display:flex;flex-wrap:wrap;gap:8px}
.tags li,.chips li{padding:6px 10px;background:var(--chip);border:1px solid var(--stroke);border-radius:999px;font-size:.85rem;color:var(--fg);transition:transform var(--dur-2) var(--ease-1), background-color var(--dur-2) ease, border-color var(--dur-2) ease}
.chips li:hover{transform:translateY(-2px)}
.list{flex-direction:column;gap:6px}
.skip{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
.skip:focus{position:static;width:auto;height:auto;padding:8px;border-radius:8px;background:var(--panel);border:1px solid var(--stroke)}


/* --- Scroll reveal cards --- */
.reveal{opacity:0;transform:translateY(14px) scale(.985);will-change:transform,opacity;filter:saturate(.9)}
.reveal.in{opacity:1;transform:none;filter:none;transition:transform var(--dur-3) cubic-bezier(.21,1,.21,1),opacity var(--dur-3) ease, filter var(--dur-3) ease}
/* Stagger: we set transition-delay inline from JS for siblings */
@media (prefers-reduced-motion: reduce){
  .reveal{opacity:1;transform:none}
  .reveal.in{transition:none}
}


/* --- Mobile-first polish --- */
:root{
  --space-1: .5rem; --space-2: .75rem; --space-3: 1rem; --space-4: 1.25rem; --space-5: 1.75rem;
}

/* Fluid typography */
h1{font-size:clamp(1.4rem, 1.1rem + 1.6vw, 2rem)}
h2{font-size:clamp(1.05rem, .95rem + .6vw, 1.25rem)}
h3{font-size:clamp(.95rem, .9rem + .3vw, 1.05rem)}
body{font-size:clamp(15px, 14px + .3vw, 18px)}

.container{padding:calc(env(safe-area-inset-top) + 16px) 16px 24px;}

/* Header wraps nicely on mobile */
header.site{flex-wrap:wrap;gap:var(--space-2);padding:12px 16px;position:sticky;top:0;z-index:20;backdrop-filter:saturate(140%) blur(6px)}
header.site .actions{width:100%;display:flex;gap:8px}
@media(min-width:720px){header.site .actions{width:auto}}

/* Tap targets */
.btn{height:var(--btn-h); padding:0 var(--btn-px); border-radius:var(--btn-r)}
.actions .btn{flex:0 0 auto}

/* Panels get comfy spacing on small screens */
.panel{padding:var(--space-3);margin:var(--space-2) 0}
.intro p{margin-top:.5rem}

/* Grid stacks on phones, two cols from 880px (already) */
.grid.two{gap:var(--space-3)}
@media(min-width:420px){.grid.two{gap:var(--space-4)}}

/* Lists and chips are easier to scan */
.tags li,.chips li{padding:8px 12px;font-size:.9rem}
.list{gap:8px}

/* Footer spacing */
footer.site{padding:12px 0}


/* --- Gallery (small, decorative) --- */
.gallery{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:4px 0 12px}
.gallery .thumb{margin:0;position:relative;contain:paint}
.gallery .thumb::after{content:"";position:absolute;inset:-2px;border-radius:14px;background:linear-gradient(120deg, color-mix(in oklab, var(--brand) 30%, transparent), color-mix(in oklab, var(--sky) 20%, transparent));opacity:.35;filter:blur(16px);z-index:0;pointer-events:none}
.gallery img{position:relative;z-index:1;width:100%;height:120px;object-fit:cover;border-radius:12px;border:1px solid var(--stroke);box-shadow:var(--shadow);transition:transform var(--dur-3) var(--ease-2), box-shadow var(--dur-3) var(--ease-2);will-change:transform}
.gallery img:hover{transform:translateY(-3px) scale(1.015)}

/* --- Icon button --- */
.btn.icon{display:inline-flex;align-items:center;justify-content:center;width:var(--btn-h);height:var(--btn-h);padding:0}

/* --- Contact popover --- */
.popover{position:fixed;left:0;top:0;min-width:220px;max-width:min(92vw, 320px);background:var(--panel);border:1px solid var(--stroke);border-radius:14px;box-shadow:var(--shadow);padding:8px;display:block;opacity:0;transform:translateY(-6px) scale(.98);pointer-events:none;transition:opacity var(--dur-2) var(--ease-1), transform var(--dur-2) var(--ease-1);z-index:400}
.popover.open{opacity:1;transform:none;pointer-events:auto}
.popover a{color:var(--fg);text-decoration:none}
.popover a:hover{background:none}
/* icon grid */
.popover .icon-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.popover .icon-grid a{display:flex;align-items:center;justify-content:center;width:56px;height:56px;border-radius:12px;border:1px solid var(--stroke);background:linear-gradient(var(--panel), var(--panel)) padding-box, linear-gradient(120deg, color-mix(in oklab, var(--brand) 30%, transparent), color-mix(in oklab, var(--sky) 25%, transparent)) border-box;transition:transform var(--dur-2) var(--ease-1), box-shadow var(--dur-2) var(--ease-1)}
.popover .icon-grid a:hover{transform:translateY(-2px) scale(1.03);box-shadow:var(--shadow)}
.popover .icon-grid svg{pointer-events:none}
/* visually hidden text for a11y */
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
@media (prefers-reduced-motion: reduce){.popover{transition:none}}

/* --- Avatar as image --- */
.avatar-img{width:54px;height:54px;border-radius:50%;object-fit:cover;border:2px solid var(--stroke);box-shadow:var(--shadow);transition:transform var(--dur-2) var(--ease-1), box-shadow var(--dur-2) var(--ease-1)}
.avatar-img:hover{transform:translateY(-2px) scale(1.02)}

/* --- Timeline --- */
.timeline{list-style:none;padding:0;margin:8px 0 0;border-left:2px solid var(--stroke)}
.t-item{position:relative;margin:0 0 16px 16px;padding-left:12px}
.t-item::before{content:'';position:absolute;left:-11px;top:.35rem;width:10px;height:10px;border-radius:50%;background:var(--brand);box-shadow:0 0 0 3px rgba(14,165,233,.2)}
.t-head{display:flex;justify-content:space-between;gap:12px;align-items:baseline}
.t-desc{margin:.25rem 0 .5rem;color:var(--muted)}

@media(min-width:880px){
  .gallery{grid-template-columns:repeat(3,1fr);}
  .gallery img{height:140px}
}

@media print{
  :root{--bg:#fff;--fg:#000;--panel:#fff;--stroke:#ddd}
  header.site, .actions .btn#themeToggle, footer.site, .skip {display:none !important}
  .container{padding:0}
  a{color:inherit;text-decoration:none}
}

/* --- Page load polish (no flash, gentle) --- */
/* Theme transitions are applied via .theming to avoid constant anims */
body:not(.loaded) .site .brand,
body:not(.loaded) .site .actions{opacity:0;transform:translateY(-6px);transition:opacity var(--dur-3) var(--ease-1), transform var(--dur-3) var(--ease-1)}
body.loaded .site .brand, body.loaded .site .actions{opacity:1;transform:none}
@media (prefers-reduced-motion: reduce){
  body:not(.loaded) .site .brand, body:not(.loaded) .site .actions{opacity:1;transform:none}
}

/* --- Link underline animation --- */
a{background-image:linear-gradient(currentColor,currentColor);background-repeat:no-repeat;background-size:0 1px;background-position:0 100%;transition:background-size var(--dur-1) ease, color var(--dur-1) ease; text-decoration:none}
a:hover{background-size:100% 1px; text-decoration:none}

/* --- Scroll progress bar --- */
.progress{position:fixed;top:0;left:0;height:2px;width:100%;transform:scaleX(0);transform-origin:0 50%;background:linear-gradient(90deg,var(--brand),var(--brand-2));z-index:100}
@media (prefers-reduced-motion: reduce){.progress{display:none}}

/* --- Smooth theme toggle (short, global) --- */
html.theming, html.theming * , html.theming *::before, html.theming *::after{
  transition: background-color var(--dur-theme) var(--ease-1),
              color var(--dur-theme) var(--ease-1),
              border-color var(--dur-theme) var(--ease-1);
}
@media (prefers-reduced-motion: reduce){
  html.theming, html.theming * , html.theming *::before, html.theming *::after{transition:none}
}
html.theming .ambient{animation-play-state: paused}

/* --- Cinematic ambient background --- */
.ambient{position:fixed;inset:-20% -20% -20% -20%;z-index:-1;pointer-events:none;filter:blur(50px) saturate(120%);opacity:.35;animation:ambientMove 26s ease-in-out infinite alternate;mix-blend-mode:screen;
  background:
    radial-gradient(40% 40% at 20% 30%, rgba(14,165,233,.35), transparent 60%),
    radial-gradient(45% 45% at 80% 20%, rgba(34,211,238,.25), transparent 60%),
    radial-gradient(45% 45% at 30% 80%, rgba(99,102,241,.25), transparent 60%),
    radial-gradient(50% 50% at 70% 75%, rgba(8,145,178,.22), transparent 60%);
}
@keyframes ambientMove{
  0%{transform:translate3d(-2%, -1%, 0) scale(1)}
  50%{transform:translate3d(2%, 3%, 0) scale(1.02)}
  100%{transform:translate3d(-1%, 2%, 0) scale(1.01)}
}
:root.light .ambient{opacity:.25;mix-blend-mode:multiply;filter:blur(40px) saturate(140%)}
@media (prefers-reduced-motion: reduce){.ambient{animation:none;opacity:.22}}

/* --- Custom cursor (fine pointers only) --- */
.cursor{position:fixed;left:0;top:0;width:18px;height:18px;border:1px solid currentColor;border-radius:999px;pointer-events:none;z-index:200;opacity:.85;mix-blend-mode:difference;transform:translate3d(-100px,-100px,0);will-change:transform;transition:opacity .25s ease}
@media (pointer: coarse){.cursor{display:none}}
@media (prefers-reduced-motion: reduce){.cursor{display:none}}

/* --- Typographic flourish --- */
h1{
  letter-spacing:.2px;
  background:linear-gradient(90deg, var(--fg), var(--brand));
  -webkit-background-clip:text;background-clip:text;color:transparent;
  background-size:200% 100%;
  transition:background-position 2.5s linear;
}
h1:hover{background-position:200% 0}

/* --- Chapter HUD --- */
.chapter{position:fixed;left:16px;top:50%;transform:translateY(-50%);color:var(--muted);font-size:.85rem;letter-spacing:.08em;text-transform:uppercase;z-index:90;opacity:.8;writing-mode:vertical-rl;text-orientation:mixed;display:none}
@media (min-width:1024px){.chapter{display:block}}
@media (prefers-reduced-motion: reduce){.chapter{transition:none}}

/* --- Hero --- */
.hero{position:relative;display:grid;grid-template-columns:1fr;align-items:center;min-height:68vh;margin:6px 0 10px;border:1px solid var(--stroke);border-radius:18px;background:linear-gradient(180deg, rgba(255,255,255,.02), transparent);padding:clamp(16px, 4vw, 36px);box-shadow:var(--shadow)}
.hero .hero-title{font-size:clamp(1.6rem, 1.2rem + 2.2vw, 2.4rem);margin:0 0 .35rem}
.hero .hero-type{max-width:60ch;color:var(--muted);font-size:clamp(1rem, .95rem + .4vw, 1.125rem);position:relative}
.hero .hero-type.typing::after{content:"|";display:inline-block;margin-left:2px;opacity:.8;animation:blink .9s steps(1,end) infinite}
@keyframes blink{50%{opacity:0}}
.hero{--avatar:220px}
.hero .hero-copy{padding-right:calc(var(--avatar) + clamp(8px, 4vw, 24px))}
.hero .hero-avatar{position:absolute;right:clamp(8px, 4vw, 24px);bottom:clamp(8px, 4vw, 24px);width:var(--avatar);height:var(--avatar);object-fit:cover;border-radius:50%;border:2px solid var(--stroke);box-shadow:var(--shadow)}
@media(min-width:720px){.hero{--avatar:300px}}
@media(min-width:1024px){.hero{min-height:72vh;--avatar:360px}}
@media (prefers-reduced-motion: reduce){.hero .hero-type.typing::after{animation:none}}

/* --- Full CV embed --- */
.cv-view{margin-top:12px;border-radius:16px;overflow:hidden;border:1px solid var(--stroke);background:var(--panel);box-shadow:var(--shadow)}
.cv-view object{width:100%;height:min(80vh, 900px);display:block}
@media (max-width:640px){.cv-view object{height:70vh}}
